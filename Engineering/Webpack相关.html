<!DOCTYPE html>
<html lang="zh-US">
  <head>
    <link rel="manifest" href="/blog/manifest.webmanifest"><title>Webpack相关 | Johnny's blog</title><meta name="description" content="认真分享和记录各类好文，逐步完善大前端知识体系。"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.22">
    <link rel="preload" href="/blog/assets/js/runtime~app.5b40ce10.js" as="script"><link rel="preload" href="/blog/assets/css/styles.678e5aee.css" as="style"><link rel="preload" href="/blog/assets/js/981.9765ac40.js" as="script"><link rel="preload" href="/blog/assets/js/app.3e27996d.js" as="script">
    <link rel="stylesheet" href="/blog/assets/css/styles.678e5aee.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/blog/" class=""><!----><span class="site-name">Johnny&#39;s blog</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/blog/JavaScript/" class="nav-link" aria-label="深入JavaScript"><!--[--><!--]--> 深入JavaScript <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Network/" class="nav-link" aria-label="计算机网络"><!--[--><!--]--> 计算机网络 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Browser/" class="nav-link" aria-label="浏览器相关"><!--[--><!--]--> 浏览器相关 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Framework/" class="nav-link" aria-label="框架和类库"><!--[--><!--]--> 框架和类库 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Engineering/" class="nav-link router-link-active" aria-label="前端工程化"><!--[--><!--]--> 前端工程化 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/NewTechnology/" class="nav-link" aria-label="新技术/方向"><!--[--><!--]--> 新技术/方向 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://hezhuoyi.github.io/leetcode" rel="noopener noreferrer" target="_blank" aria-label="LeetCode"><!--[--><!--]--> LeetCode <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/hezhuoyi" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://juejin.cn/user/3597257778155703" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/blog/JavaScript/" class="nav-link" aria-label="深入JavaScript"><!--[--><!--]--> 深入JavaScript <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Network/" class="nav-link" aria-label="计算机网络"><!--[--><!--]--> 计算机网络 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Browser/" class="nav-link" aria-label="浏览器相关"><!--[--><!--]--> 浏览器相关 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Framework/" class="nav-link" aria-label="框架和类库"><!--[--><!--]--> 框架和类库 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/Engineering/" class="nav-link router-link-active" aria-label="前端工程化"><!--[--><!--]--> 前端工程化 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/NewTechnology/" class="nav-link" aria-label="新技术/方向"><!--[--><!--]--> 新技术/方向 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://hezhuoyi.github.io/leetcode" rel="noopener noreferrer" target="_blank" aria-label="LeetCode"><!--[--><!--]--> LeetCode <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/hezhuoyi" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://juejin.cn/user/3597257778155703" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">前端工程化</p><ul class=""><li><!--[--><a href="/blog/Engineering/" class="nav-link router-link-active sidebar-item" aria-label="概览"><!--[--><!--]--> 概览 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/Engineering/%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B.html" class="nav-link sidebar-item" aria-label="技术选型"><!--[--><!--]--> 技术选型 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/Engineering/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96.html" class="nav-link sidebar-item" aria-label="开发规范化"><!--[--><!--]--> 开发规范化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/Engineering/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7.html" class="nav-link sidebar-item" aria-label="前端监控"><!--[--><!--]--> 前端监控 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/Engineering/Serverless.html" class="nav-link sidebar-item" aria-label="Serverless"><!--[--><!--]--> Serverless <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/Engineering/%E4%B8%BB%E6%B5%81%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94.html" class="nav-link sidebar-item" aria-label="主流打包工具对比"><!--[--><!--]--> 主流打包工具对比 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/Engineering/k8s.html" class="nav-link sidebar-item" aria-label="k8s"><!--[--><!--]--> k8s <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Webpack相关"><!--[--><!--]--> Webpack相关 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#webpack工作流程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="webpack工作流程"><!--[--><!--]--> webpack工作流程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#loader和plugin的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Loader和Plugin的区别"><!--[--><!--]--> Loader和Plugin的区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#构建流程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="构建流程"><!--[--><!--]--> 构建流程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#提高效率的插件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="提高效率的插件"><!--[--><!--]--> 提高效率的插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#打包体积" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="打包体积"><!--[--><!--]--> 打包体积 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#构建速度" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="构建速度"><!--[--><!--]--> 构建速度 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#其他优化" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="其他优化"><!--[--><!--]--> 其他优化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Engineering/Webpack%E7%9B%B8%E5%85%B3.html#热更新" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="热更新"><!--[--><!--]--> 热更新 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="webpack相关" tabindex="-1"><a class="header-anchor" href="#webpack相关" aria-hidden="true">#</a> Webpack相关</h1><h2 id="webpack工作流程" tabindex="-1"><a class="header-anchor" href="#webpack工作流程" aria-hidden="true">#</a> webpack工作流程</h2><p><img src="/blog/assets/img/webpack4.ed2eeb08.png" alt="webpack4工作流程"></p><p><strong>Webpack 本质上是一种事件流的机制，它的工作流程就是将各个插件串联起来，而实现这一切的核心就是 Tapable，Webpack 中最核心的负责编译的 Compiler 和负责创建 bundles 的 Compilation 都是 Tapable 的子类，并且实例内部的生命周期也是通过 Tapable 库提供的钩子类实现的。</strong></p><h2 id="loader和plugin的区别" tabindex="-1"><a class="header-anchor" href="#loader和plugin的区别" aria-hidden="true">#</a> Loader和Plugin的区别</h2><p><code>Loader</code> 本质就是一个函数，<strong>在该函数中对接收到的内容进行转换，返回转换后的结果。</strong> 因为 Webpack 只认识 JavaScript，所以 Loader 就成了翻译官，对其他类型的资源进行转译的预处理工作。</p><p><strong>css-loader</strong> 将@import 和 url 处理成正规的ES6 import 使css文件模块化</p><p><strong>style-loader</strong> 会将输出的css注入到打包文件中 （通过DOM操作将之前导出内容中的样式插入到style标签中）</p><p><strong>postcss-loader</strong> 添加浏览器前缀</p><p><code>Plugin</code> 就是插件，基于事件流框架 <code>Tapable</code>，<strong>插件可以扩展 Webpack 的功能</strong>，<strong>在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</strong></p><h3 id="在webpack的plugin运行的过程中存在两个非常重要的对象-compiler和compilation。" tabindex="-1"><a class="header-anchor" href="#在webpack的plugin运行的过程中存在两个非常重要的对象-compiler和compilation。" aria-hidden="true">#</a> 在webpack的plugin运行的过程中存在两个非常重要的对象：<code>compiler</code>和<code>compilation</code>。</h3><ul><li><p>compiler：在初始化compiler对象之后，通过调用插件实例的apply方法，作为其参数传入。这个对象包含了webpack环境的所有的配置信息，比如options，loaders，plugins等。这个对象会在webpack被启动的时候进行实例化，全局且唯一的。</p></li><li><p>compilation：这个对象会作为plugin内置事件回调函数的参数。包含了当前的模块资源，编译生成的资源，变化的文件等信息。如果我们运行在开发模式，每当检测到一个文件的变化，就会生成一个新的compilation对象。</p></li></ul><p>所以，compiler代表了webpack从启动到关闭的整个生命周期，而compilation仅仅代表了一次新的编译。</p><h2 id="构建流程" tabindex="-1"><a class="header-anchor" href="#构建流程" aria-hidden="true">#</a> 构建流程</h2><ol><li><strong>初始化参数</strong>：从配置文件和 Shell 语句中读取与合并参数,得出最终的参数。</li><li><strong>开始编译</strong>：用上一步得到的参数初始化 Compiler 对象,加载所有配置的插件,执行对象的 run 方法开始执行编译。</li><li><strong>确定入口</strong>：根据配置中的 entry 找出所有的入口文件。</li><li><strong>编译模块</strong>：从入口文件出发,调用所有配置的 Loader 对模块进行翻译,再找出该模块依赖的模块,再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理。</li><li><strong>完成模块编译</strong>：在经过第 4 步使用 Loader 翻译完所有模块后,得到了每个模块被翻译后的最终内容以及它们之间的依赖关系。</li><li><strong>输出资源</strong>：根据入口和模块之间的依赖关系,组装成一个个包含多个模块的 Chunk,再把每个 Chunk 转换成一个单独的文件加入到输出列表,这步是可以修改输出内容的最后机会。</li><li><strong>输出完成</strong>：在确定好输出内容后,根据配置确定输出的路径和文件名,把文件内容写入到文件系统。</li></ol><p><strong>在以上过程中,Webpack 会在特定的时间点广播出特定的事件,插件在监听到感兴趣的事件后会执行特定的逻辑,并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</strong></p><h2 id="提高效率的插件" tabindex="-1"><a class="header-anchor" href="#提高效率的插件" aria-hidden="true">#</a> 提高效率的插件</h2><p><strong><code>webpack-dashboard</code>：可以更友好的展示相关打包信息。</strong></p><p><strong><code>webpack-merge</code>：提取公共配置，减少重复配置代码</strong></p><p><strong><code>speed-measure-webpack-plugin</code>：简称 SMP，分析出 Webpack 打包过程中 Loader 和 Plugin 的耗时，有助于找到构建过程中的性能瓶颈。</strong></p><p><strong><code>size-plugin</code>：监控资源体积变化，尽早发现问题</strong></p><p><strong><code>webpack-bundle-analyzer</code> 生成 <code>bundle</code> 的模块组成图，显示所占体积。</strong></p><p><strong><code>HotModuleReplacementPlugin</code>：模块热替换</strong></p><p><strong><code>NamedModulesPlugin</code></strong>：<strong>显示热替换模块文件名称</strong></p><p>webpack 的一些优化手段，<strong>打包时间方面、缓存、缩小构建目标</strong></p><h2 id="打包体积" tabindex="-1"><a class="header-anchor" href="#打包体积" aria-hidden="true">#</a> 打包体积</h2><p><strong>打包体积优化，减少首次访问白屏时间</strong>：按需加载 <strong>code-splitting 代码切割</strong>：需要使用 <code>import()</code> 语法：<code>import()</code> 语法，需要 <code>@babel/plugin-syntax-dynamic-import</code> 的插件支持，但是因为当前 <code>@babel/preset-env</code> 预设中已经包含了 <code>@babel/plugin-syntax-dynamic-import</code>，因此我们不需要再单独安装和配置。</p><ol><li><strong>externals配置</strong></li></ol><p>防止 <strong>将某些 <code>import</code> 的包(package)</strong> 打包到 bundle 中，而是在运行时(runtime)再去从外部获取这些扩展依赖(external dependencies) --- <strong>CDN引入</strong>。</p><ol start="2"><li><strong>SplitChunksPlugin</strong></li></ol><p>页面公共资源：使用 SplitChunksPlugin 进行(公共脚本、基础包、页面公共文件)分离(Webpack4内置) ，替代了 CommonsChunkPlugin 插件</p><ol start="3"><li><strong>使用Tree Shaking</strong></li></ol><p>ES6 模块化语法是静态的，可以静态分析=&gt;需要使用<strong>UglifyJsPlugin</strong>插件</p><h2 id="构建速度" tabindex="-1"><a class="header-anchor" href="#构建速度" aria-hidden="true">#</a> 构建速度</h2><p><strong>使用 DllPlugin</strong>：<strong>DLLPlugin 和 DLLReferencePlugin 用某种方法实现了拆分 bundles，同时还大大提升了构建的速度。</strong></p><ol><li><strong>DllPlugin配置一份webpack配置文件，用于生成动态链接库。</strong></li></ol><p>第一次使用 webpack.dll.config.js 文件会对第三方库打包，打包完成后就不会再打包它了，然后每次运行 webpack.config.js文件的时候，都会打包项目中本身的文件代码，当需要使用第三方依赖的时候，会<strong>使用 DllReferencePlugin插件去读取第三方依赖库</strong>，<strong>看看是否有该第三方库</strong>。所以说它的打包速度会得到一个很大的提升。）</p><ol start="2"><li><strong>使用 HappyPack或thread-loader</strong></li></ol><p>Webpack 是单线程模型的，也就是说 Webpack 需要一个一个地处理任务，<strong>不能同时处理多个任务</strong>。<strong>HappyPack将任务分解给多个子进程去并发执行</strong>，子进程处理完后再将结果发送给主进程,从而发挥多核 CPU 电脑的威力。</p><ol start="3"><li><strong>使用 ParallelUglifyPlugin</strong></li></ol><p>webpack默认提供了<strong>UglifyJS</strong>插件来压缩JS代码，但是它使用的是单线程压缩代码，也就是说多个js文件需要被压缩，它需要一个个文件进行压缩。所以说在正式环境打包压缩代码速度非常慢(<strong>因为压缩JS代码需要先把代码解析成用Object抽象表示的AST语法树，再去应用各种规则分析和处理AST，导致这个过程耗时非常大</strong>)。</p><p>当webpack有<strong>多个JS文件需要输出和压缩时候</strong>，原来会使用UglifyJS去一个个压缩并且输出，但是ParallelUglifyPlugin插件则会<strong>开启多个子进程</strong>，把对多个文件压缩的工作分别给多个子进程去完成，但是每个子进程还是通过UglifyJS去压缩代码。无非就是变成了<strong>并行处理</strong>该压缩了，并行处理多个子任务，效率会更加的提高。</p><h2 id="其他优化" tabindex="-1"><a class="header-anchor" href="#其他优化" aria-hidden="true">#</a> 其他优化</h2><p>图片压缩--<strong>配置image-webpack-loader</strong><code>缩小打包作用域</code> --exclude/include (确定 loader 规则范围)</p><p><strong>cache-loader</strong>--在一些<strong>性能开销较大</strong>的 loader 之前添加此 loader，以将结果缓存到磁盘里。</p><p><strong>IgnorePlugin</strong>-- <code>webpack</code> 的内置插件，作用是忽略第三方包指定目录。</p><p><a href="https://juejin.cn/post/6844904071736852487" target="_blank" rel="noopener noreferrer">webpack优化<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="热更新" tabindex="-1"><a class="header-anchor" href="#热更新" aria-hidden="true">#</a> 热更新</h2><p><img src="/blog/assets/img/hotfix.64984708.png" alt="webpack热更新"></p><h3 id="webpack大纲" tabindex="-1"><a class="header-anchor" href="#webpack大纲" aria-hidden="true">#</a> webpack大纲</h3><p><img src="/blog/assets/img/webpack.2a952414.png" alt="webpack大纲"></p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/blog/Engineering/k8s.html" class="nav-link" aria-label="k8s"><!--[--><!--]--> k8s <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/blog/assets/js/runtime~app.5b40ce10.js" defer></script><script src="/blog/assets/js/981.9765ac40.js" defer></script><script src="/blog/assets/js/app.3e27996d.js" defer></script>
  </body>
</html>
