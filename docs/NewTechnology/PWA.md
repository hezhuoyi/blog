# PWA

## 渐进式Web应用程序

**渐进式**：

- 第一步，应该是安全，将全站 HTTPS 化，因为这是 PWA 的基础，没有 HTTPS，就没有 Service Worker
- 第二步，应该是 Service Worker 来提升基础性能，离线提供静态文件，把用户首屏体验提升上来
- 第三步，App Manifest，这一步可以和第二步同时进行
- 后续，再考虑其他的特性，离线消息推送等

**PWA 本质上是 Web App，借助一些新技术也具备了 Native App 的一些特性，兼具 Web App 和 Native App 的优点。**

PWA应用的超前的体验方式已经可以开始使用，这是它的优点。

- 极其可靠的：PWA应用 拥有极其快速的载入速度，即便是在离线无网络的环境下也不会出现网络异常。
- 它的响应非常的迅速并且拥有丝滑流畅的动画，绝对不会出现异常卡顿滑动。
- 你会感觉就像在使用一个原生应用，并且拥有它会提供给你沉浸式的用户体验。

由以下几种技术构成：

- **App Manifest**
- **Service Worker**
- **Notifications API**
- **Push API**

Manifest是一个JSON格式的文件，你可以把它理解为一个指定了Web App桌面图标、名称、开屏图标、运行模式等一系列资源的一个清单。

> manifest 的目的是将Web应用程序安装到设备的主屏幕，为用户提供更快的访问和更丰富的体验。 —— MDN

## Service Worker
其中Service Worker是PWA技术的关键，它们可以让app满足上面的三基准。其他技术则是锦上添花，让app更加的强大。

在Web Worker的基础上，W3C新增了service worker来满足我们持久化的需求。其生命周期与页面无关，关联页面未关闭时，它也可以退出，没有关联页面时，它也可以启动功能。

Service Worker虽然满足了离线缓存来，其功能可不仅仅局限于此。 可以提供

- **丰富的离线体验，**
- **周期的后台同步，**
- **消息推送通知，**
- **拦截和处理网络请求，**
- **管理资源缓存**
  这些正好也是PWA的目的，所以说Service Worker是PWA的关键技术。

**Service Worker本质上也是浏览器缓存资源用的，只不过他不仅仅是cache，也是通过worker的方式来进一步优化。他基于h5的web worker，所以绝对不会阻碍当前js线程的执行**，sw最重要的工作原理就是

1、**后台线程**：独立于当前网页线程；

2、**网络代理**：在网页发起请求时代理，来缓存文件；
